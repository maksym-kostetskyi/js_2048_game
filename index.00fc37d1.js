var t={};const e=new(t=class{constructor(t=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]){console.log(t),this.state=t,this.score=0}moveLeft(){}moveRight(){}moveUp(){}moveDown(){}getScore(){}getState(){}getStatus(){}start(){}restart(){}getRandomNumber(){}addNumber(){}canMove(){}getEmptyCells(){}fillCells(){}moveUtil(){}}),s=document.querySelector(".button"),l=document.querySelector(".game-score"),i=document.querySelector(".message-container p:nth-child(3)"),o=document.querySelector(".message-container p:nth-child(2)"),r=document.querySelector(".message-container p:nth-child(1)");t.prototype.getState=function(){return console.log(this.state),this.state},t.prototype.getScore=function(){return this.score},t.prototype.getStatus=function(){return this.state===t.prototype.initialState?"idle":(this.state.forEach(t=>{if(t.includes(2048))return"win"}),this.canMerge()||0!==this.getEmptyCells().length)?"playing":"lose"},t.prototype.moveLeft=function(){let t=!1,e=[!0,!0,!0,!0];for(let s=0;s<this.state.length;s++){let l=[...this.state[s]],i=this.state[s].filter(t=>0!==t);for(let e=0;e<i.length-1;e++)i[e]===i[e+1]&&(i[e]*=2,i[e+1]=0,this.score+=i[e],t=!0);for(i=i.filter(t=>0!==t);i.length<this.state[s].length;)i.push(0);i.every((t,e,s)=>t===l[e])&&(e[s]=!1),this.state[s]=i}(t||e.includes(!0))&&(this.addNumber(),this.getState()),this.moveUtil()},t.prototype.moveRight=function(){let t=!1,e=[!0,!0,!0,!0];for(let s=0;s<this.state.length;s++){let l=[...this.state[s]],i=this.state[s].filter(t=>0!==t);for(let e=i.length-1;e>0;e--)i[e]===i[e-1]&&(i[e]*=2,i[e-1]=0,t=!0,this.score+=i[e]);for(i=i.filter(t=>0!==t);i.length<this.state[s].length;)i.unshift(0);i.every((t,e,s)=>t===l[e])&&(e[s]=!1),this.state[s]=i}(t||e.includes(!0))&&(this.addNumber(),this.getState()),this.moveUtil()},t.prototype.moveUp=function(){let t=!1,e=[!0,!0,!0,!0];for(let s=0;s<this.state.length;s++){let l=[];for(let t=0;t<this.state.length;t++)l.push(this.state[t][s]);let i=[...l];l=l.filter(t=>0!==t);for(let e=0;e<l.length-1;e++)l[e]===l[e+1]&&(l[e]*=2,l[e+1]=0,this.score+=l[e],t=!0);for(l=l.filter(t=>0!==t);l.length<this.state.length;)l.push(0);l.every((t,e,s)=>t===i[e])&&(e[s]=!1);for(let t=0;t<this.state.length;t++)this.state[t][s]=l[t]}(t||e.includes(!0))&&(this.addNumber(),this.getState()),this.moveUtil()},t.prototype.moveDown=function(){let t=!1,e=[!0,!0,!0,!0];for(let s=0;s<this.state.length;s++){let l=[];for(let t=0;t<this.state.length;t++)l.push(this.state[t][s]);let i=[...l];l=l.filter(t=>0!==t);for(let e=l.length-1;e>0;e--)l[e]===l[e-1]&&(l[e]*=2,l[e-1]=0,t=!0,this.score+=l[e]);for(l=l.filter(t=>0!==t);l.length<this.state.length;)l.unshift(0);l.every((t,e)=>t===i[e])&&(e[s]=!1);for(let t=0;t<this.state.length;t++)this.state[t][s]=l[t]||0}(t||e.includes(!0))&&(this.addNumber(),this.getState()),this.moveUtil()},t.prototype.restart=function(){this.state=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],s.className="button start",s.innerHTML="Start",this.score=0,l.innerHTML=this.score,this.fillCells(),i.className="message message-start",o.className="message message-win hidden",r.className="message message-lose hidden"},t.prototype.getRandomNumber=function(){return[2,2,2,2,2,2,2,2,2,4][Math.floor(10*Math.random())]},t.prototype.addNumber=function(){if(0!==this.getEmptyCells().length){let t=this.getEmptyCells(),e=Math.floor(Math.random()*t.length),s=t[e];this.state[s[0]][s[1]]=this.getRandomNumber()}},t.prototype.canMerge=function(){for(let t=0;t<this.state.length;t++)for(let e=0;e<this.state.length;e++)if(e<this.state.length-1&&this.state[t][e]===this.state[t][e+1]||t<this.state.length-1&&this.state[t][e]===this.state[t+1][e])return!0;return!1},t.prototype.getEmptyCells=function(){let t=[];for(let e=0;e<this.state.length;e++)for(let s=0;s<this.state[e].length;s++)0===this.state[e][s]&&t.push([e,s]);return t},t.prototype.start=function(){this.getEmptyCells().length===this.state.length**2&&(this.addNumber(),this.addNumber(),this.fillCells(),this.getState(),i.className="message message-start hidden")},t.prototype.fillCells=function(){let t=document.querySelector(".game-field").querySelectorAll(".field-cell");for(let e=0;e<this.state.length;e++)for(let s=0;s<this.state[e].length;s++){let l=4*e+s;0===this.state[e][s]&&(t[l].className="field-cell",t[l].innerHTML=""),0!==this.state[e][s]&&(t[l].className=`field-cell field-cell--${this.state[e][s]}`,t[l].innerHTML=this.state[e][s])}},t.prototype.toggleButton=function(){"idle"===this.getStatus()?(s.className="button start",s.innerHTML="Start"):this.getEmptyCells().length!==this.state.length**2&&(s.className="button restart",s.innerHTML="Restart")},t.prototype.moveUtil=function(){this.toggleButton(),this.fillCells(),l.innerHTML=this.score,"win"===this.getStatus()&&(o.className="message message-win"),"lose"===this.getStatus()&&(r.className="message message-lose")},s.addEventListener("click",()=>{"button start"===s.className&&e.start(),"button restart"===s.className&&e.restart()}),window.addEventListener("keydown",function(t){"ArrowLeft"===t.key&&e.moveLeft(),"ArrowRight"===t.key&&e.moveRight(),"ArrowUp"===t.key&&e.moveUp(),"ArrowDown"===t.key&&e.moveDown(),e.fillCells()},!1);
//# sourceMappingURL=index.00fc37d1.js.map
