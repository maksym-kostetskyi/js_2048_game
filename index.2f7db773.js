!function(){function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var n={},r=new(n=function(){var t;function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,e),console.log(t),this.state=t,this.score=0}return t=[{key:"moveLeft",value:function(){}},{key:"moveRight",value:function(){}},{key:"moveUp",value:function(){}},{key:"moveDown",value:function(){}},{key:"getScore",value:function(){}},{key:"getState",value:function(){}},{key:"getStatus",value:function(){}},{key:"start",value:function(){}},{key:"restart",value:function(){}},{key:"getRandomNumber",value:function(){}},{key:"addNumber",value:function(){}},{key:"canMove",value:function(){}},{key:"getEmptyCells",value:function(){}},{key:"fillCells",value:function(){}},{key:"moveUtil",value:function(){}}],function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(e.prototype,t),e}()),s=document.querySelector(".button"),o=document.querySelector(".game-score"),a=document.querySelector(".message-container p:nth-child(3)"),i=document.querySelector(".message-container p:nth-child(2)"),l=document.querySelector(".message-container p:nth-child(1)");n.prototype.getState=function(){return console.log(this.state),this.state},n.prototype.getScore=function(){return this.score},n.prototype.getStatus=function(){return this.state===n.prototype.initialState?"idle":(this.state.forEach(function(t){if(t.includes(2048))return"win"}),this.canMerge()||0!==this.getEmptyCells().length)?"playing":"lose"},n.prototype.moveLeft=function(){for(var t=this,n=!1,r=[!0,!0,!0,!0],s=0;s<this.state.length;s++)!function(s){for(var o=e(t.state[s]),a=t.state[s].filter(function(t){return 0!==t}),i=0;i<a.length-1;i++)a[i]===a[i+1]&&(a[i]*=2,a[i+1]=0,t.score+=a[i],n=!0);for(a=a.filter(function(t){return 0!==t});a.length<t.state[s].length;)a.push(0);a.every(function(t,e,n){return t===o[e]})&&(r[s]=!1),t.state[s]=a}(s);(n||r.includes(!0))&&(this.addNumber(),this.getState()),this.moveUtil()},n.prototype.moveRight=function(){for(var t=this,n=!1,r=[!0,!0,!0,!0],s=0;s<this.state.length;s++)!function(s){for(var o=e(t.state[s]),a=t.state[s].filter(function(t){return 0!==t}),i=a.length-1;i>0;i--)a[i]===a[i-1]&&(a[i]*=2,a[i-1]=0,n=!0,t.score+=a[i]);for(a=a.filter(function(t){return 0!==t});a.length<t.state[s].length;)a.unshift(0);a.every(function(t,e,n){return t===o[e]})&&(r[s]=!1),t.state[s]=a}(s);(n||r.includes(!0))&&(this.addNumber(),this.getState()),this.moveUtil()},n.prototype.moveUp=function(){for(var t=this,n=!1,r=[!0,!0,!0,!0],s=0;s<this.state.length;s++)!function(s){for(var o=[],a=0;a<t.state.length;a++)o.push(t.state[a][s]);var i=e(o);o=o.filter(function(t){return 0!==t});for(var l=0;l<o.length-1;l++)o[l]===o[l+1]&&(o[l]*=2,o[l+1]=0,t.score+=o[l],n=!0);for(o=o.filter(function(t){return 0!==t});o.length<t.state.length;)o.push(0);o.every(function(t,e,n){return t===i[e]})&&(r[s]=!1);for(var u=0;u<t.state.length;u++)t.state[u][s]=o[u]}(s);(n||r.includes(!0))&&(this.addNumber(),this.getState()),this.moveUtil()},n.prototype.moveDown=function(){for(var t=this,n=!1,r=[!0,!0,!0,!0],s=0;s<this.state.length;s++)!function(s){for(var o=[],a=0;a<t.state.length;a++)o.push(t.state[a][s]);var i=e(o);o=o.filter(function(t){return 0!==t});for(var l=o.length-1;l>0;l--)o[l]===o[l-1]&&(o[l]*=2,o[l-1]=0,n=!0,t.score+=o[l]);for(o=o.filter(function(t){return 0!==t});o.length<t.state.length;)o.unshift(0);o.every(function(t,e){return t===i[e]})&&(r[s]=!1);for(var u=0;u<t.state.length;u++)t.state[u][s]=o[u]||0}(s);(n||r.includes(!0))&&(this.addNumber(),this.getState()),this.moveUtil()},n.prototype.restart=function(){this.state=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],s.className="button start",s.innerHTML="Start",this.score=0,o.innerHTML=this.score,this.fillCells(),a.className="message message-start",i.className="message message-win hidden",l.className="message message-lose hidden"},n.prototype.getRandomNumber=function(){return[2,2,2,2,2,2,2,2,2,4][Math.floor(10*Math.random())]},n.prototype.addNumber=function(){if(0!==this.getEmptyCells().length){var t=this.getEmptyCells(),e=Math.floor(Math.random()*t.length),n=t[e];this.state[n[0]][n[1]]=this.getRandomNumber()}},n.prototype.canMerge=function(){for(var t=0;t<this.state.length;t++)for(var e=0;e<this.state.length;e++)if(e<this.state.length-1&&this.state[t][e]===this.state[t][e+1]||t<this.state.length-1&&this.state[t][e]===this.state[t+1][e])return!0;return!1},n.prototype.getEmptyCells=function(){for(var t=[],e=0;e<this.state.length;e++)for(var n=0;n<this.state[e].length;n++)0===this.state[e][n]&&t.push([e,n]);return t},n.prototype.start=function(){this.getEmptyCells().length===Math.pow(this.state.length,2)&&(this.addNumber(),this.addNumber(),this.fillCells(),this.getState(),a.className="message message-start hidden")},n.prototype.fillCells=function(){for(var t=document.querySelector(".game-field").querySelectorAll(".field-cell"),e=0;e<this.state.length;e++)for(var n=0;n<this.state[e].length;n++){var r=4*e+n;0===this.state[e][n]&&(t[r].className="field-cell",t[r].innerHTML=""),0!==this.state[e][n]&&(t[r].className="field-cell field-cell--".concat(this.state[e][n]),t[r].innerHTML=this.state[e][n])}},n.prototype.toggleButton=function(){"idle"===this.getStatus()?(s.className="button start",s.innerHTML="Start"):this.getEmptyCells().length!==Math.pow(this.state.length,2)&&(s.className="button restart",s.innerHTML="Restart")},n.prototype.moveUtil=function(){this.toggleButton(),this.fillCells(),o.innerHTML=this.score,"win"===this.getStatus()&&(i.className="message message-win"),"lose"===this.getStatus()&&(l.className="message message-lose")},s.addEventListener("click",function(){"button start"===s.className&&r.start(),"button restart"===s.className&&r.restart()}),window.addEventListener("keydown",function(t){"ArrowLeft"===t.key&&r.moveLeft(),"ArrowRight"===t.key&&r.moveRight(),"ArrowUp"===t.key&&r.moveUp(),"ArrowDown"===t.key&&r.moveDown(),r.fillCells()},!1)}();
//# sourceMappingURL=index.2f7db773.js.map
